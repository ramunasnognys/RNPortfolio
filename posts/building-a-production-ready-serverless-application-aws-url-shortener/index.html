<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Production-Ready Serverless URL Shortener on AWS: A Step-by-Step Guide | Ramunas Nognys</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/theme.min.css">
    
    <link rel="stylesheet" href="/css/custom.min.e3c7ef98fdaf928ed19b2abf587f31fb9a65e9ea1616cf64e058e05a66c743a5.css" integrity="sha256-48fvmP2vko7Rmyq/WH8x&#43;5pl6eoWFs9k4FjgWmbHQ6U=">
</head>
<body>
    <header class="header">
    <div class="header-content">
        <a href="/" class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="2" width="20" height="20" stroke="#7C3AED" stroke-width="2" fill="#7C3AED" fill-opacity="0.1"/>
            </svg>
            Ramunas Nognys
        </a>
        <nav class="nav-links">
            <a href="/projects" class="nav-link">Projects</a>
            <a href="/blog" class="nav-link">Blog</a>
            <button class="theme-switch" id="theme-toggle" aria-label="Toggle theme">
                <svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </nav>
    </div>
</header>

    <main>
        
<div class="content-wrapper">
    <div class="post-container">
        <article class="post-single">
        <header class="post-header">
            <div class="post-meta">
                
                <time datetime="2025-01-25T00:00:00Z">
                    January 25, 2025
                </time>
                
                <span class="reading-time">• 700 words • 3 min read</span>
            </div>
            <h1 class="post-title">Building a Production-Ready Serverless URL Shortener on AWS: A Step-by-Step Guide</h1>
            
            <div class="post-description">A comprehensive guide to building a serverless URL shortener using AWS Lambda, API Gateway, and DynamoDB, with automated deployments through GitHub Actions.</div>
            
            
            <div class="post-tags">
                
                <span class="tag">AWS</span>
                
                <span class="tag">Serverless</span>
                
                <span class="tag">Python</span>
                
                <span class="tag">Terraform</span>
                
                <span class="tag">DevOps</span>
                
                <span class="tag">Infrastructure as Code</span>
                
            </div>
            
        </header>

        <div class="post-content">
            
            
            <p><img src="/images/Pasted%20image%2020250125094350.png" alt="Pasted image 20250125094350.png"></p>
<blockquote>
<p>[!info In the modern web landscape, serverless architectures have emerged as a powerful paradigm for building scalable applications without managing traditional infrastructure. Today, we&rsquo;ll explore this concept by building a practical, production-ready URL shortener using AWS serverless services.]</p>
</blockquote>
<h1 id="building-a-production-ready-serverless-application-aws-url-shortener">Building a Production-Ready Serverless Application: AWS URL Shortener</h1>
<p><strong>Level</strong>: Beginner | <strong>Tools</strong>: AWS, Terraform, Python, GitHub Actions</p>
<hr>
<h2 id="1-project-overview">1. Project Overview</h2>
<p><strong>Purpose</strong>: Deploy a serverless URL shortener using AWS. Users can submit long URLs and receive shortened links via an API.</p>
<p><strong>Architecture</strong>:</p>
<ol>
<li><strong>AWS Lambda</strong> (Python): Handles URL shortening and redirection logic.</li>
<li><strong>API Gateway</strong>: Routes HTTP requests to Lambda functions.</li>
<li><strong>DynamoDB</strong>: Stores mappings between short codes and original URLs.</li>
<li><strong>GitHub Actions</strong>: Automates deployment of infrastructure and code.</li>
<li><strong>CloudWatch</strong>: Monitors logs and performance.</li>
</ol>
<p><img src="/images/Pasted%20image%2020250125094902.png" alt="Pasted image 20250125094902.png"></p>
<hr>
<h2 id="2-technical-requirements">2. Technical Requirements</h2>
<ul>
<li><strong>AWS Account</strong> (free tier eligible).</li>
<li><strong>Tools Installed</strong>:
<ul>
<li>Terraform (<code>v1.5+</code>).</li>
<li>AWS CLI (<code>v2.13+</code>).</li>
<li>Python (<code>3.9+</code>) or Node.js (<code>18+</code>).</li>
<li>Git.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="3-step-by-step-implementation">3. Step-by-Step Implementation</h2>
<h3 id="31-infrastructure-setup-with-terraform">3.1 Infrastructure Setup with Terraform</h3>
<p><strong>Step 1</strong>: Configure AWS CLI.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">aws configure  
</span></span><span class="line"><span class="cl"><span class="c1"># Enter AWS Access Key, Secret Key, and default region (e.g., us-east-1)  </span>
</span></span></code></pre></div><p><strong>Step 2</strong>: Create Terraform files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="c1"># main.tf  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">provider</span> <span class="s2">&#34;aws&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">region</span> <span class="o">=</span> <span class="s2">&#34;us-east-1&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_dynamodb_table&#34; &#34;url_shortener&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">name</span>         <span class="o">=</span> <span class="s2">&#34;url-mappings&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">billing_mode</span> <span class="o">=</span> <span class="s2">&#34;PAY_PER_REQUEST&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">hash_key</span>     <span class="o">=</span> <span class="s2">&#34;short_code&#34;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">attribute</span> {  
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;short_code&#34;</span>  
</span></span><span class="line"><span class="cl">    <span class="n">type</span> <span class="o">=</span> <span class="s2">&#34;S&#34;</span>  
</span></span><span class="line"><span class="cl">  }  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_iam_role&#34; &#34;lambda_role&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;lambda_execution_role&#34;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">assume_role_policy</span> <span class="o">=</span> <span class="k">jsonencode</span><span class="p">(</span>{  
</span></span><span class="line"><span class="cl">    <span class="n">Version</span> <span class="o">=</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="n">Statement</span> <span class="o">=</span> <span class="p">[</span>{  
</span></span><span class="line"><span class="cl">      <span class="n">Action</span> <span class="o">=</span> <span class="s2">&#34;sts:AssumeRole&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">      <span class="n">Effect</span> <span class="o">=</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">      <span class="n">Principal</span> <span class="o">=</span><span class="n"> { Service</span> <span class="o">=</span> <span class="s2">&#34;lambda.amazonaws.com&#34;</span> }  
</span></span><span class="line"><span class="cl">    }<span class="p">]</span>  
</span></span><span class="line"><span class="cl">  }<span class="p">)</span>  
</span></span><span class="line"><span class="cl">}<span class="c1">  
</span></span></span><span class="line"><span class="cl"><span class="c1">
</span></span></span><span class="line"><span class="cl"><span class="c1"># Attach DynamoDB access policy to the role  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resource</span> <span class="s2">&#34;aws_iam_role_policy_attachment&#34; &#34;lambda_dynamo&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">role</span>       <span class="o">=</span> <span class="k">aws_iam_role</span><span class="p">.</span><span class="k">lambda_role</span><span class="p">.</span><span class="k">name</span>  
</span></span><span class="line"><span class="cl">  <span class="n">policy_arn</span> <span class="o">=</span> <span class="s2">&#34;arn:aws:iam::aws:policy/AmazonDynamoDBFullAccess&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></div><p><strong>Step 3</strong>: Deploy infrastructure.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">terraform init  
</span></span><span class="line"><span class="cl">terraform apply -auto-approve  
</span></span></code></pre></div><hr>
<h3 id="32-write-and-deploy-lambda-functions">3.2 Write and Deploy Lambda Functions</h3>
<p><strong>Step 4</strong>: Create a Python Lambda function (<code>lambda_handler.py</code>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>  
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>  
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">boto3</span>  
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl"><span class="n">table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;url-mappings&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_short_url</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">shortuuid</span>  <span class="c1"># Add to requirements.txt  </span>
</span></span><span class="line"><span class="cl">    <span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">])</span>  
</span></span><span class="line"><span class="cl">    <span class="n">long_url</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">short_code</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">table</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span><span class="n">Item</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;short_code&#39;</span><span class="p">:</span> <span class="n">short_code</span><span class="p">,</span> <span class="s1">&#39;long_url&#39;</span><span class="p">:</span> <span class="n">long_url</span><span class="p">})</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;statusCode&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;short_url&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;https://api.example.com/</span><span class="si">{</span><span class="n">short_code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">})}</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">redirect_short_url</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>  
</span></span><span class="line"><span class="cl">    <span class="n">short_code</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;pathParameters&#39;</span><span class="p">][</span><span class="s1">&#39;short_code&#39;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">    <span class="n">item</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">Key</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;short_code&#39;</span><span class="p">:</span> <span class="n">short_code</span><span class="p">})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>  
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;statusCode&#39;</span><span class="p">:</span> <span class="mi">404</span><span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;statusCode&#39;</span><span class="p">:</span> <span class="mi">301</span><span class="p">,</span> <span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Location&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;long_url&#39;</span><span class="p">]}}</span>  
</span></span></code></pre></div><p><strong>Step 5</strong>: Package and deploy using Terraform.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="c1"># lambda.tf  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resource</span> <span class="s2">&#34;aws_lambda_function&#34; &#34;shorten_url&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">filename</span>      <span class="o">=</span> <span class="s2">&#34;lambda.zip&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">function_name</span> <span class="o">=</span> <span class="s2">&#34;shorten-url&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">role</span>          <span class="o">=</span> <span class="k">aws_iam_role</span><span class="p">.</span><span class="k">lambda_role</span><span class="p">.</span><span class="k">arn</span>  
</span></span><span class="line"><span class="cl">  <span class="n">handler</span>       <span class="o">=</span> <span class="s2">&#34;lambda_handler.create_short_url&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">runtime</span>       <span class="o">=</span> <span class="s2">&#34;python3.9&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_lambda_function&#34; &#34;redirect_url&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">filename</span>      <span class="o">=</span> <span class="s2">&#34;lambda.zip&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">function_name</span> <span class="o">=</span> <span class="s2">&#34;redirect-url&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">role</span>          <span class="o">=</span> <span class="k">aws_iam_role</span><span class="p">.</span><span class="k">lambda_role</span><span class="p">.</span><span class="k">arn</span>  
</span></span><span class="line"><span class="cl">  <span class="n">handler</span>       <span class="o">=</span> <span class="s2">&#34;lambda_handler.redirect_short_url&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">runtime</span>       <span class="o">=</span> <span class="s2">&#34;python3.9&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></div><hr>
<h3 id="33-configure-api-gateway">3.3 Configure API Gateway</h3>
<p><strong>Step 6</strong>: Link Lambda to API Gateway.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="c1"># api_gateway.tf  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">resource</span> <span class="s2">&#34;aws_apigatewayv2_api&#34; &#34;main&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">name</span>          <span class="o">=</span> <span class="s2">&#34;url-shortener-api&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">protocol_type</span> <span class="o">=</span> <span class="s2">&#34;HTTP&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_apigatewayv2_integration&#34; &#34;shorten&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">api_id</span>           <span class="o">=</span> <span class="k">aws_apigatewayv2_api</span><span class="p">.</span><span class="k">main</span><span class="p">.</span><span class="k">id</span>  
</span></span><span class="line"><span class="cl">  <span class="n">integration_type</span> <span class="o">=</span> <span class="s2">&#34;AWS_PROXY&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">integration_uri</span>  <span class="o">=</span> <span class="k">aws_lambda_function</span><span class="p">.</span><span class="k">shorten_url</span><span class="p">.</span><span class="k">invoke_arn</span>  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_apigatewayv2_route&#34; &#34;post_route&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">api_id</span>    <span class="o">=</span> <span class="k">aws_apigatewayv2_api</span><span class="p">.</span><span class="k">main</span><span class="p">.</span><span class="k">id</span>  
</span></span><span class="line"><span class="cl">  <span class="n">route_key</span> <span class="o">=</span> <span class="s2">&#34;POST /shorten&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">target</span>    <span class="o">=</span> <span class="s2">&#34;integrations/${aws_apigatewayv2_integration.shorten.id}&#34;</span>  
</span></span><span class="line"><span class="cl">}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">resource</span> <span class="s2">&#34;aws_apigatewayv2_route&#34; &#34;get_route&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">api_id</span>    <span class="o">=</span> <span class="k">aws_apigatewayv2_api</span><span class="p">.</span><span class="k">main</span><span class="p">.</span><span class="k">id</span>  
</span></span><span class="line"><span class="cl">  <span class="n">route_key</span> <span class="o">=</span> <span class="s2">&#34;GET /{short_code}&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="n">target</span>    <span class="o">=</span> <span class="s2">&#34;integrations/${aws_apigatewayv2_integration.redirect.id}&#34;</span><span class="c1">  # Define redirect integration similarly  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>}  
</span></span></code></pre></div><hr>
<h3 id="34-automate-deployments-with-github-actions">3.4 Automate Deployments with GitHub Actions</h3>
<p><strong>Step 7</strong>: Create <code>.github/workflows/deploy.yml</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">main]  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v4  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">hashicorp/setup-terraform@v2  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Terraform Apply  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">AWS_ACCESS_KEY_ID</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.AWS_ACCESS_KEY_ID }}  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">AWS_SECRET_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.AWS_SECRET_ACCESS_KEY }}  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l">|  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="l">terraform init  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="l">terraform apply -auto-approve  </span><span class="w">
</span></span></span></code></pre></div><hr>
<h2 id="4-testing--validation">4. Testing &amp; Validation</h2>
<h3 id="41-load-testing-with-k6">4.1 Load Testing with k6</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// load-test.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">http</span> <span class="nx">from</span> <span class="s1">&#39;k6/http&#39;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">check</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;k6&#39;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;https://api.example.com/shorten&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;https://example.com&#39;</span> <span class="p">}),</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span> <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="p">});</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">check</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;status was 200&#39;</span><span class="o">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span></code></pre></div><p>Run with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">k6 run --vus <span class="m">10</span> --duration 30s load-test.js  
</span></span></code></pre></div><h3 id="42-cost-optimization-tips">4.2 Cost Optimization Tips</h3>
<ul>
<li>Set Lambda memory to 128MB if possible.</li>
<li>Use DynamoDB auto-scaling.</li>
<li>Enable API Gateway caching.</li>
</ul>
<hr>
<h2 id="5-appendix">5. Appendix</h2>
<h3 id="sample-terraform-output">Sample Terraform Output</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="k">output</span> <span class="s2">&#34;api_url&#34;</span> {  
</span></span><span class="line"><span class="cl">  <span class="n">value</span> <span class="o">=</span> <span class="k">aws_apigatewayv2_api</span><span class="p">.</span><span class="k">main</span><span class="p">.</span><span class="k">api_endpoint</span>  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></div><h3 id="troubleshooting">Troubleshooting</h3>
<p><strong>Cold Starts</strong>:</p>
<ul>
<li>Use provisioned concurrency for critical Lambdas.</li>
</ul>
<p><strong>Permission Errors</strong>:</p>
<ul>
<li>Ensure IAM roles have <code>dynamodb:PutItem</code> and <code>dynamodb:GetItem</code> policies.</li>
</ul>
<hr>
<p><strong>Next Steps</strong>: Add custom domains, authentication, or a frontend!</p>
<p><em>(Replace placeholder URLs and test all code snippets before production use.)</em></p>

            
            
        </div>

        <nav class="post-nav">
            
            <a class="nav-prev" href="https://blog.ramunasnognys.tech/posts/2025-01-25-lovable-dev-analysis/">
                <div class="nav-indicator">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    <span>Previous</span>
                </div>
                <span class="nav-title">Lovable: Revolutionizing AI-Powered Development</span>
            </a>
            
            
            
        </nav>
    </article>
    </div>

    
    <div class="table-of-contents">
        <div class="toc-title">Table of Contents</div>
        
        
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-project-overview">1. Project Overview</a></li>
    <li><a href="#2-technical-requirements">2. Technical Requirements</a></li>
    <li><a href="#3-step-by-step-implementation">3. Step-by-Step Implementation</a>
      <ul>
        <li><a href="#31-infrastructure-setup-with-terraform">3.1 Infrastructure Setup with Terraform</a></li>
        <li><a href="#32-write-and-deploy-lambda-functions">3.2 Write and Deploy Lambda Functions</a></li>
        <li><a href="#33-configure-api-gateway">3.3 Configure API Gateway</a></li>
        <li><a href="#34-automate-deployments-with-github-actions">3.4 Automate Deployments with GitHub Actions</a></li>
      </ul>
    </li>
    <li><a href="#4-testing--validation">4. Testing &amp; Validation</a>
      <ul>
        <li><a href="#41-load-testing-with-k6">4.1 Load Testing with k6</a></li>
        <li><a href="#42-cost-optimization-tips">4.2 Cost Optimization Tips</a></li>
      </ul>
    </li>
    <li><a href="#5-appendix">5. Appendix</a>
      <ul>
        <li><a href="#sample-terraform-output">Sample Terraform Output</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const id = entry.target.getAttribute('id');
            const tocLink = document.querySelector(`.table-of-contents nav a[href="#${id}"]`);
            
            if (tocLink) {
                if (entry.intersectionRatio > 0) {
                    document.querySelectorAll('.table-of-contents nav a').forEach(link => {
                        link.classList.remove('active');
                    });
                    tocLink.classList.add('active');
                }
            }
        });
    }, {
        rootMargin: '-20% 0px -80% 0px'
    });

    document.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').forEach((header) => {
        observer.observe(header);
    });
});
</script>

    </main>
    <footer class="footer">
    <div class="content-wrapper">
        <p>&copy; 2025 Ramunas Nognys. All rights reserved.</p>
    </div>
</footer>

    
    <script src="/js/theme.min.js"></script>
</body>
</html>
